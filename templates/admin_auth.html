{% extends "layout.html" %}
{% block content %}
<h2 class="mb-4 text-center">Admin Access</h2>
<div class="d-flex justify-content-center mb-3">
    <button id="loginTab" class="btn btn-primary me-2" onclick="showForm('login')">Login</button>
    <button id="signupTab" class="btn btn-outline-primary" onclick="showForm('signup')">Sign Up</button>
</div>
<form id="loginForm" method="post" style="display: {% if mode == 'login' %}block{% else %}none{% endif %};">
    <input type="hidden" name="action" value="login">
    <div class="form-group">
        <label>Username</label>
        <input type="text" name="username" class="form-control" required>
    </div>
    <div class="form-group">
        <label>Password</label>
        <input type="password" name="password" class="form-control" required>
    </div>
    <button type="submit" class="btn btn-primary">Login</button>
</form>
<form id="signupForm" method="post" style="display: {% if mode == 'signup' %}block{% else %}none{% endif %};">
    <input type="hidden" name="action" value="signup">
    <div class="form-group">
        <label>Username</label>
        <input type="text" name="username" class="form-control" required>
    </div>
    <div class="form-group">
        <label>Password</label>
        <input type="password" name="password" class="form-control" required>
    </div>
    <button type="submit" class="btn btn-success">Sign Up</button>
</form>
{% if message %}
<div class="alert alert-info">{{ message }}</div>
{% endif %}
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="mt-3">
      {% for category, message in messages %}
        <div class="alert alert-{{ category }}">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}
<script>
function showForm(mode) {
    document.getElementById('loginForm').style.display = (mode === 'login') ? 'block' : 'none';
    document.getElementById('signupForm').style.display = (mode === 'signup') ? 'block' : 'none';
    document.getElementById('loginTab').classList.toggle('btn-primary', mode === 'login');
    document.getElementById('loginTab').classList.toggle('btn-outline-primary', mode !== 'login');
    document.getElementById('signupTab').classList.toggle('btn-primary', mode === 'signup');
    document.getElementById('signupTab').classList.toggle('btn-outline-primary', mode !== 'signup');
}
// On page load, set correct tab
window.onload = function() {
    showForm("{{ mode }}");
};
</script>
{% endblock %}
